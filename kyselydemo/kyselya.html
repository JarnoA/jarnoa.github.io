<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sain tulokseksi: Rohkea Reissaaja!</title>

    <meta property="og:url" content="https://csy.fi/kysely/tulos-a/" />
    <meta property="og:title" content="Olen Rohkea Reissaaja - Mik√§ sin√§ olet?" />
    <meta property="og:description" content="Tein testin ja selvisi, ett√§ olen peloton reissaaja." />
    <meta property="og:image" content="https://placehold.co/1200x630/orange/white?text=Reissaaja+Kuva" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f4f8; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .container { background: white; padding: 40px; border-radius: 15px; text-align: center; max-width: 500px; width: 100%; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .char-img { width: 100%; border-radius: 10px; margin-bottom: 20px; }
        
        /* Oletuksena piilotetaan molemmat, JavaScript n√§ytt√§√§ oikean */
        #kiosk-view { display: none; }
        #mobile-view { display: none; }

        .share-btn { display: block; padding: 12px; margin: 5px 0; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; background-color: #3b5998; }
        .qr-box { background: #f9f9f9; padding: 20px; border-radius: 10px; margin-top: 20px; border: 2px dashed #ccc; }
        #qrcode { display: flex; justify-content: center; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="container">
        <h2>Olet eniten kuin...</h2>
        <h1>Rohkea Reissaaja</h1>
        <img src="https://placehold.co/600x400/orange/white?text=Reissaaja" alt="Reissaaja" class="char-img">
        <p>Olet peloton ja aina valmis uusiin haasteisiin!</p>

        <div id="kiosk-view">
            <div class="qr-box">
                <h3>üì± Jaa tulos omalla puhelimella</h3>
                <p>Skannaa koodi, niin tulos siirtyy puhelimeesi ja voit jakaa sen!</p>
                <div id="qrcode"></div>
            </div>
            <a href="../../index.html" class="share-btn" style="background:#7f8c8d; margin-top:20px;">‚¨Ö Palaa alkuun (Seuraava vastaaja)</a>
        </div>

        <div id="mobile-view">
            <h3>Jaa tuloksesi somessa:</h3>
            <a href="#" id="share-fb" class="share-btn">Jaa Facebookissa</a>
            <a href="#" id="share-wa" class="share-btn" style="background:#25D366;">L√§het√§ WhatsAppissa</a>
            
            <a href="../../index.html" class="share-btn" style="background:#7f8c8d; margin-top:20px;">Tee testi uudestaan</a>
        </div>
    </div>

    <script>
        // 1. TARKISTETAAN OLLAANKO MESSUILLA VAI PUHELIMELLA
        const params = new URLSearchParams(window.location.search);
        const isKiosk = params.get('source') === 'kiosk';

        // M√§√§ritet√§√§n puhdas osoite (ilman ?source=kiosk -sotkua)
        // T√ÑRKE√Ñ√Ñ: T√§m√§ "window.location.origin + window.location.pathname" poistaa kysymysmerkit
        const cleanUrl = window.location.origin + window.location.pathname; 

        if (isKiosk) {
            // OLLAAN MESSUILLA -> N√§yt√§ QR-koodi
            document.getElementById('kiosk-view').style.display = 'block';

            // Luo QR-koodi puhtaasta osoitteesta
            new QRCode(document.getElementById("qrcode"), {
                text: cleanUrl, // T√§ss√§ ei ole ?source=kiosk mukana
                width: 180,
                height: 180
            });

        } else {
            // OLLAAN PUHELIMELLA -> N√§yt√§ some-napit
            document.getElementById('mobile-view').style.display = 'block';

            // P√§ivit√§ some-linkit
            const shareTitle = "Olen Rohkea Reissaaja! Testaa itsesi:";
            document.getElementById('share-fb').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(cleanUrl)}`;
            document.getElementById('share-wa').href = `https://api.whatsapp.com/send?text=${shareTitle}%20${encodeURIComponent(cleanUrl)}`;
        }
    </script>

</body>
</html>